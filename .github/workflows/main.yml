name: Android Build and Basic Test

on:
  push:
    branches:
      - master

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Download and install JDK 19
      run: |
        wget -q https://download.java.net/java/GA/jdk19/634c8db89d084d0780ea5df2cbbcc727/21/GPL/openjdk-19_linux-x64_bin.tar.gz
        mkdir -p /opt/java/jdk-19
        tar xzf openjdk-19_linux-x64_bin.tar.gz -C /opt/java/jdk-19 --strip-components=1
        echo "export JAVA_HOME=/opt/java/jdk-19" >> $GITHUB_ENV
        echo "export PATH=$JAVA_HOME/bin:$PATH" >> $GITHUB_ENV

    - name: Make Gradlew executable
      run: chmod +x gradlew

    - name: Build and test
      run: ./gradlew build test
